# OpenTelemetry によるオブザーバビリティ

OpenTelemetry は、オープンソースでベンダーに依存しないオブザーバビリティフレームワークです。
ログ、メトリクス、トレースを含むテレメトリデータを収集およびエクスポートするための標準化された方法を提供します。
OpenTelemetry を活用することで、組織はベンダーからの独立性を確保し、将来を見据えたオブザーバビリティ戦略を実現しながら、包括的なオブザーバビリティパイプラインを実装できます。



## OpenTelemetry を使用したメトリクスとインサイトの収集

1. **計装**: OpenTelemetry を使用する最初のステップは、アプリケーションやサービスに OpenTelemetry ライブラリや SDK を組み込むことです。これらのライブラリは、アプリケーションコードからメトリクス、トレース、ログなどのテレメトリデータを自動的にキャプチャしてエクスポートします。

2. **メトリクス収集**: OpenTelemetry は、アプリケーションからメトリクスを収集しエクスポートする標準化された方法を提供します。これらのメトリクスには、システムメトリクス（CPU、メモリ、ディスク使用量）、アプリケーションレベルのメトリクス（リクエスト率、エラー率、レイテンシー）、およびアプリケーション固有のカスタムビジネスメトリクスが含まれます。

3. **分散トレーシング**: OpenTelemetry は分散トレーシングをサポートし、リクエストや操作が分散システム全体を伝播する様子を追跡できます。これにより、リクエストのエンドツーエンドのフローに関する貴重な洞察が得られ、ボトルネックの特定やパフォーマンスの問題のトラブルシューティングが可能になります。

4. **ログ記録**: OpenTelemetry の主な焦点はメトリクスとトレースにありますが、ログデータをキャプチャしてエクスポートするための構造化されたログ API も提供しています。これにより、ログが他のテレメトリデータと相関付けられ、システムの動作を包括的に把握することができます。

5. **エクスポーター**: OpenTelemetry は、テレメトリデータを異なるバックエンドや可観測性プラットフォームに送信できる様々なエクスポーターをサポートしています。一般的なエクスポーターには、Prometheus、Jaeger、Zipkin、および AWS CloudWatch、Azure Monitor、Google Cloud Operations などのクラウドネイティブな可観測性ソリューションがあります。

6. **データ処理と分析**: テレメトリデータがエクスポートされると、可観測性プラットフォーム、モニタリングツール、またはカスタムデータ処理パイプラインを活用して、収集されたメトリクス、トレース、ログを分析し可視化できます。この分析により、システムパフォーマンスの洞察が得られ、ボトルネックの特定やトラブルシューティング、根本原因分析に役立ちます。

![Otel](./images/otel.png)
*図 1: ADOT と FluentBit を使用して可観測性シグナルを送信する EKS クラスター*
<!--Ref: https://aws.amazon.com/blogs/architecture/amazon-cloudwatch-insights-for-amazon-eks-on-ec2-using-aws-distro-for-opentelemetry-helm-charts/-->




## OpenTelemetry を使用する利点

1. **ベンダー中立性**: OpenTelemetry はオープンソースでベンダー中立のプロジェクトであり、オブザーバビリティ戦略が特定のベンダーやプラットフォームに縛られないことを保証します。この柔軟性により、必要に応じてオブザーバビリティバックエンドを切り替えたり、複数のソリューションを組み合わせたりすることができます。

2. **標準化**: OpenTelemetry はテレメトリデータを収集およびエクスポートする標準化された方法を提供し、異なるコンポーネントやシステム間で一貫したデータ形式と相互運用性を可能にします。

3. **将来性**: OpenTelemetry を採用することで、オブザーバビリティ戦略の将来性を確保できます。プロジェクトが進化し、新機能や統合が追加されても、既存の計装を大幅なコード変更なしで簡単に更新できます。

4. **包括的なオブザーバビリティ**: OpenTelemetry は複数のテレメトリシグナル（メトリクス、トレース、ログ）をサポートし、システムの動作とパフォーマンスを包括的に把握することができます。

5. **エコシステムとコミュニティサポート**: OpenTelemetry には成長中の統合エコシステム、ツール、活発な貢献者コミュニティがあり、継続的な開発とサポートが保証されています。

OpenTelemetry をオブザーバビリティに活用することで、組織はシステムに関する深い洞察を得ることができ、プロアクティブな監視、効率的なトラブルシューティング、データ駆動の意思決定を可能にしながら、オブザーバビリティ戦略における柔軟性とベンダー独立性を維持することができます。
